# ARM2D2 Description Package
   
## Simulating this package.

1. Use [Fusion2urdf Plugin](https://github.com/syuntoku14/fusion2urdf) to generate a urdf from a fusion360 assembly on a Windows machine.
   
   - You can open Inventor IPT files in fusion 360
   
   - Convert each link to a component
      - Make sure there are no components within components
      - Each link component can contain multiple bodies. These bodies will all be merged into a single .stl for that component
      - Use the `select > selection priority > select body priority` option to make selecting bodies easier
      - You can select multiple bodies then the combine button and select new component to easily convert them into a single component
 

2. Replace the `meshes` directory in this arm2d2_description with the ones that were generated by fusion2urdf

3. Generate the urdf to be converted to MJCF
   
   `python3 generate_urdf.py <fusion2urdf/xacro/file/path> <arm2d2_description/arm2d2.urdf>`
   
4. Make sure the [Apogee Robotics Mujoco Ros simulator](https://github.com/Apogee-Robotics/mujoco_ros) is installed.
   

5. Convert to MJCF (MuJoCo File)
   
   `cd mujoco-2.2.2`
   
   `./bin/compile model/arm2d2_description/arm2d2.urdf model/arm2d2_description/arm2d2.xml`

The xml MJCF file can now be edited to control how arm2d2 is simulated.


## File Description
**meshes**
   - Contains the .stl for each link in the robot
   
**config/joint_config.yaml**
   - Contains a list of each joint name
   - Contains values to convert between degrees and steps

**arm2d2.srdf**
   - Describes which joints belong to different parts of the robot (Ex: manipulator, gripper)
   - Disables collisions for any links that may be next to other links or will never collide with other links
 
**arm2d2.urdf**
   - The input file to the mujoco compiler
   - STL file names are relative to the meshes directory
   
**arm2d2.urdf.xacro**
   - Used by ROS for motion planning and collision avoidance
   - Displayed when using RVIZ
   - STL file names are relative to the arm2d2_description directory
   
**arm2d2.xml**
   - The output file from the mujoco compiler
   - This is loaded by the mujoco simulator
   - STL file names are relative to the meshes directory
   - Must add actuator and sensors at the bottom after compiling
   
**CMakeLists.txt & package.xml**
   - Describe the package itself
   - Used for compiling with ROS catkin
   - Will not need to be changed while updating a new model


## Converting CAD files to 3D Point Clouds

Any object that will be tracked and caught will need to be converted into a 3D point cloud.

Here are the steps to do so:

1. Create an STL file for the CAD object
   
   This is pretty simple, and most people should know how to do it

2. Convert the STL to PLY
   PLY is a file type for mesh objects. [This webpage](https://imagetostl.com/convert/file/stl/to/ply) can do this conversion.

3. Use PCL Mesh2PCD to convert to PCD
   [These instructions](https://stackoverflow.com/questions/58040066/how-to-compile-point-cloud-library-pcl-with-examples-ubuntu) explain how to install pcl.
   PCD is the Point Cloud Data format.

